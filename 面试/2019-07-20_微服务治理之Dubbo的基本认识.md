# 微服务治理之Dubbo的基本认识

## Dubbo

​        Dubbo(读音[ˈdʌbəʊ])是阿里巴巴公司开源的一个高性能优秀的服务框架，使得应用可通过高性能的 RPC 实现服务的输出和输入功能，可以和 Spring 框架无缝集成。

​        Dubbo是一款高性能、轻量级的开源 Java RPC 框架，它提供了三大核心能力：面向接口的远程方法调用，智能容错和负载均衡，以及服务自动注册和发现。



## 服务治理的要求

1. 注册中心
2. 如何实现链路监控
3. 服务通信异常的容错
4. 负载均衡



**服务端**

```java
<!-- 声明需要暴露的服务接口 -->
<dubbo:service interface="com.gupaoedu.dubbo.IPayService" ref="payService" />

<!-- 和本地bean一样实现服务 -->
<bean id="payService" class="com.gupaoedu.dubbo.PayServiceImpl" />
```

NettyServer



**客户端**

```java
<dubbo:reference interface="com.gupaoedu.dubbo.IPayService" id="payService"
    url="dubbo://localhost:20880/com.gupaoedu.dubbo.IPayService"/>
```

NettyClient



**Dubbo服务启动之后生成的地址信息**

````java
dubbo://192.168.0.105:20880/com.gupaoedu.dubbo.IPayService?anyhost=true&application=pay-service&bean.name=com.gupaoedu.dubbo.IPayService&bind.ip=192.168.0.105&bind.port=20880&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=com.gupaoedu.dubbo.IPayService&methods=pay&pid=3184&register=true&release=2.7.2&side=provider&timestamp=1583914942987, dubbo version: 2.7.2, current host: 192.168.0.105
````



**如果多个服务来自不同的注册中心, dubbo怎么解决**

配置多个配置中心

```java
<dubbo:registry id="rg1" address="zookeeper://47.106.95.92:50805" /> <!-- 配置注册中心 -->
<dubbo:registry id="rg2" address="zookeeper://localhost:2181" /> <!-- 配置注册中心 -->
    
<dubbo:service interface="com.gupaoedu.dubbo.IPayService" ref="payService" registry="rg1"/>
<dubbo:service interface="com.gupaoedu.dubbo.IQueryService" ref="queryService" registry="rg2"/>
```



## 多协议支持

Dubbo是一个生态 -> 平台

1. 可以支持各种注册中心
   - Multicast 注册中心
   - Zookeeper 注册中心
   - Nacos 注册中心
   - Redis 注册中心
   - Simple 注册中心
2. 支持各种协议
   - 不同协议有不同的特性 : 如长连接\短链接

```java
<dubbo:protocol name="dubbo" port="20880" />
<dubbo:protocol name="webservice" port="8080" server="jetty" />
<dubbo:service interface="com.gupaoedu.dubbo.IQueryService" ref="queryService" protocol="dubbo,webservice" registry="rg2"/>
```